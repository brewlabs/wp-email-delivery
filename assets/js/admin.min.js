!function(a){a(document).ready(function(b){a("#sending").change(function(){a("#sending_verify").hide(),a("#dkim_check").hide(),a("#spf_check").hide()}),a("#sending_verify").click(function(b){b.preventDefault(),b.target.blur();var c={domain:a("#sending").val()},e=new d.DKIM;a("#dkim_check").removeClass("dashicons-yes").addClass("spin").addClass("dashicons-update").css("color","gray"),e.fetch({data:c,success:function(b){a("#dkim_check").addClass("dashicons-yes").removeClass("spin").removeClass("dashicons-update"),1==b.get("success")?a("#dkim_check").css("color","green"):a("#dkim_check").css("color","red")},type:"POST"}),a("#spf_check").removeClass("dashicons-yes").addClass("spin").addClass("dashicons-update").css("color","gray");var f=new d.SPF;f.fetch({data:c,success:function(b){a("#spf_check").addClass("dashicons-yes").removeClass("spin").removeClass("dashicons-update"),1==b.get("success")?a("#spf_check").css("color","green"):a("#spf_check").css("color","red")},type:"POST"})});var c=Backbone.Router.extend({routes:{"wped/:action/:id":"defaultRoute","wped/status":"wped_info","wped/verify":"wped_verify"}}),d={Views:{}};d.Model=Backbone.Model.extend({url:ajaxurl+"?action=wped_verify_sender"}),d.DKIM=Backbone.Model.extend({urlRoot:ajaxurl+"?action=wped_verify_dkim",defaults:{domain:"",email:""}}),d.SPF=Backbone.Model.extend({urlRoot:ajaxurl+"?action=wped_verify_spf",defaults:{domain:"",email:""}});var e=wp.Backbone.View.extend({tagName:"div",template:wp.template("my-awesome-template"),events:{"click .media-modal-backdrop, .media-modal-close":"escapeHandler",keydown:"keydown"},constructor:function(a){a&&a.controller&&(this.controller=a.controller),wp.Backbone.View.apply(this,arguments)},initialize:function(){},render:function(){this.$el.html(this.template({name:"world"}))},open:function(){var b,c=this.$el,d=this.options;return c.is(":visible")?this:(this.views.attached||this.attach(),d.freeze&&(this._freeze={scrollTop:a(window).scrollTop()}),a("body").addClass("modal-open"),c.show(),"ontouchend"in document&&(b=window.tinymce&&window.tinymce.activeEditor)&&!b.isHidden()&&b.iframeElement&&(b.iframeElement.focus(),b.iframeElement.blur(),setTimeout(function(){b.iframeElement.blur()},100)),this.$el.focus(),this.propagate("open"))},close:function(b){var c=this._freeze;return this.views.attached&&this.$el.is(":visible")?(a("body").removeClass("modal-open"),this.$el.hide().undelegate("keydown"),a("#wpbody-content").focus(),this.propagate("close"),c&&a(window).scrollTop(c.scrollTop),b&&b.escape&&this.propagate("escape"),f.navigate(""),this):this},attach:function(){return this.views.attached?this:(this.views.rendered||this.render(),this.$el.appendTo(this.options.container),this.views.attached=!0,this.views.ready(),this.propagate("attach"))},detach:function(){return this.$el.is(":visible")&&this.close(),this.$el.detach(),this.views.attached=!1,this.propagate("detach")},escape:function(){return this.close({escape:!0})},escapeHandler:function(a){a.preventDefault(),this.escape()},propagate:function(a){return this.trigger(a),this.options.propagate&&this.controller.trigger(a),this},keydown:function(a){27===a.which&&this.$el.is(":visible")&&(this.escape(),a.stopImmediatePropagation())}}),f=new c;f.on("route:defaultRoute",function(b,c){a(document).ready(function(){var a=new e({});a.open()})}),f.on("route:wped_verify",function(b,c){a(document).ready(function(){var b=new e({});b.open();var c=new d.Model;c.fetch(),a("body").append(b.$el)})}),f.on("route:wped_info",function(b){a(document).ready(function(){})}),Backbone.history.start()})}(jQuery);